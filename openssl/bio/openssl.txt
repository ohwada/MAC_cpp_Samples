cd /Users/ohwada/C++/openssl/bio

cmake . -DOPENSSL_ROOT_DIR=/usr/local/Cellar/openssl@1.1/1.1.1g/


-DOPENSSL_LIBRARIES=/usr/local/ssl/lib

% cmake .
-- Found OpenSSL: /usr/local/lib/libcrypto.dylib (found version "1.1.1")  
-- OPENSSL_INCLUDE_DIR: /Library/Frameworks/GStreamer.framework/Headers
-- OPENSSL_SSL_LIBRARIES: /usr/local/lib/libssl.dylib



% make
 50%] Linking C executable bio_new
ld: cannot link directly with dylib/framework, your binary is not an allowed client of /usr/lib/libcrypto.dylib for architecture x86_64

ohwada@ohwada-MacBook-Air bio % ls -la /usr/lib/libcrypto.dylib 
-rwxr-xr-x  1 root  wheel  32944  8 11 05:56 /usr/lib/libcrypto.dylib


% cmake .
Found OpenSSL: /usr/lib/libcrypto.dylib (found version "1.1.1")  
-- OPENSSL_INCLUDE_DIR: /Library/Frameworks/GStreamer.framework/Headers
-- OPENSSL_SSL_LIBRARY: /usr/lib/libssl.dylib
-- OPENSSL_SSL_LIBRARIES: /usr/lib/libssl.dylib


ohwada@ohwada-MacBook-Air bio % ./bio_new
BIO_new_connect success! bio = 43c05800


gcc BIO_new_connect.c `pkg-config --cflags --libs openssl`

ada-MacBook-Air bio % ./a.out
BIO_new_connect success! bio = c4405800

% cmake .
-- Found OpenSSL: /usr/local/Cellar/openssl@1.1/1.1.1g/lib/libcrypto.dylib (found version "1.1.1")  
-- OPENSSL_INCLUDE_DIR: /Library/Frameworks/GStreamer.framework/Headers
-- OPENSSL_SSL_LIBRARY: /usr/local/Cellar/openssl@1.1/1.1.1g/lib/libssl.dylib

% make
Undefined symbols for architecture x86_64:
  "_BIO_free_all", referenced from:




cmake .
-- Found OpenSSL: /usr/local/Cellar/openssl@1.1/1.1.1g/lib/libcrypto.dylib (found version "1.1.1")  
-- OPENSSL_INCLUDE_DIR: /Library/Frameworks/GStreamer.framework/Headers

make
Undefined symbols for architecture x86_64:
  "_OPENSSL_init_ssl",

=======
gcc https_client.c  -I/usr/local/opt/openssl/include/  -L/usr/lib -lssl
ld: library not found for -lssl

====
gcc https_client.c  -I/usr/local/opt/openssl/include/  -lm /usr/lib/libssl.dylib

ld: cannot link directly with dylib/framework, your binary is not an allowed client of /usr/lib/libssl.dylib for architecture x86_64
=====


cat /usr/local/opt/openssl/include/openssl/opensslv.h



% sudo cp pkgconfig/*.pc /usr/local/lib/pkgconfig/

% pkg-config --cflags --libs openssl
-I/usr/local/Cellar/openssl@1.1/1.1.1g//include -L/usr/local/Cellar/openssl@1.1/1.1.1g//lib -lssl


gcc https_client.c  `pkg-config --cflags --libs openssl` -o ssl


% ls /usr/local/Cellar/openssl@1.1/1.1.1g/lib/pkgconfig 
libcrypto.pc	libssl.pc	openssl.pc


sudo ln-s /usr/local/Cellar/openssl@1.1/1.1.1g/lib/pkgconfig/libssl.pc /usr/local/lib/pkgconfig/libssl.pc

sudo ln-s /usr/local/Cellar/openssl@1.1/1.1.1g/lib/pkgconfig/libcrypto.pc /usr/local/lib/pkgconfig/libcrypto.pc

 `pkg-config --cflags --libs libevent`

 pkg-config --cflags --libs libcrypto
-I/usr/local/Cellar/openssl@1.1/1.1.1g/include 
-L/usr/local/Cellar/openssl@1.1/1.1.1g/lib -lcrypto

 pkg-config --cflags --libs libssl
 -I/usr/local/Cellar/openssl@1.1/1.1.1g/include 
-L/usr/local/Cellar/openssl@1.1/1.1.1g/lib -lssl